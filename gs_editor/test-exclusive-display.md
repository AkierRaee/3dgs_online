# 测试互斥显示功能

## 修改内容

✅ 已完成场景管理器显示逻辑修改：

### 新的显示行为
1. **默认显示**：只有第一个加载的PLY文件默认可见
2. **互斥显示**：点击任何PLY文件名字时，该文件变为可见，其他自动隐藏
3. **眼睛图标**：现在只作为状态显示，不再支持点击切换
4. **自动选择**：显示某个PLY时自动选中它，触发相关面板更新

### 修改的文件
- **`src/ui/splat-list.ts`** - 重构显示逻辑

## 测试步骤

### 准备测试
1. 启动SuperSplat：`npm run develop`
2. 在浏览器中打开 `http://localhost:3000`

### 测试场景

#### 1. **加载多个PLY文件**
- 拖放或导入3个不同的.ply文件到场景中
- **预期结果**：
  - 只有第一个PLY文件可见（眼睛图标显示为可见状态）
  - 其他PLY文件隐藏（眼睛图标显示为隐藏状态）
  - 第一个PLY文件自动被选中（名字高亮）

#### 2. **测试互斥显示**
- 点击第二个PLY文件的名字
- **预期结果**：
  - 第二个PLY文件变为可见
  - 第一个和第三个PLY文件自动隐藏
  - 第二个PLY文件被选中
  - timeline面板显示第二个PLY的关键帧

#### 3. **测试眼睛图标**
- 尝试点击眼睛图标
- **预期结果**：
  - 眼睛图标不响应点击
  - 只能通过点击PLY名字来切换显示

#### 4. **测试删除功能**
- 删除当前显示的PLY文件
- **预期结果**：
  - 如果还有其他PLY文件，第一个剩余的PLY自动显示并选中
  - 如果没有剩余PLY，场景为空

#### 5. **测试场景重置**
- 清空场景后重新加载PLY文件
- **预期结果**：
  - 新加载的第一个PLY文件自动显示并选中

## 技术实现

### 核心逻辑
```typescript
// 互斥显示函数
const showOnlySplat = (targetSplat: Splat) => {
    items.forEach((item, splat) => {
        const shouldBeVisible = splat === targetSplat;
        splat.visible = shouldBeVisible;
        item.visible = shouldBeVisible;
    });
};

// 点击处理
this.on('click', (item: SplatItem) => {
    // 显示被点击的splat，隐藏其他
    showOnlySplat(key);
    // 选中该splat
    events.fire('selection', key);
});
```

### 关键改动
1. **移除眼睛图标交互**：不再监听眼睛图标的点击事件
2. **添加互斥显示逻辑**：`showOnlySplat()` 函数确保只有一个PLY可见
3. **默认显示控制**：`isFirstSplat` 标记确保只有第一个PLY默认可见
4. **状态同步**：确保UI状态与实际可见性同步

### 用户体验改进
- **简化操作**：一键切换显示，无需手动隐藏其他文件
- **清晰状态**：始终只有一个文件可见，避免混淆
- **自动选择**：显示的文件自动被选中，配合独立关键帧功能

## 与独立关键帧功能的配合

这个修改与之前的独立关键帧功能完美配合：
1. 点击某个PLY名字 → 该PLY变为可见并被选中
2. 选中事件触发 → timeline面板显示该PLY的独立关键帧
3. 用户可以为该PLY设置独立的动画关键帧
4. 切换到其他PLY → 显示该PLY的独立关键帧

现在用户可以：
- 为每个PLY文件设置独立的关键帧动画
- 通过点击名字快速切换查看不同PLY的动画
- 享受清晰的单文件显示体验 